pipeline {
     agent any
   stages {
       stage ('compile stage') {
	    steps {
		   sh '/usr/local/maven/bin/mvn clean'
		}
	}
	  stage ('testing stage') {
	   steps {
		       sh '/usr/local/maven/bin/mvn test'
		   }
	   }
	  stage ('deployment') {
	   steps {
	           sh '/usr/local/maven/bin/mvn package'
	   }
	   }
	  stage ('merge into master') {
	   steps {
	          sh 'cd /var/lib/jenkins/workspace/new-test-pipeline'
		  sh 'git merge master'
		  sh 'git commit -am "merge into master"'
		  sh 'git push origin master'
		  }
		}
	  }
}
